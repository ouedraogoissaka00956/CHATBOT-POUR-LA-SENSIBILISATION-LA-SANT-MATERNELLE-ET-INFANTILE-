<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mes rappels - Chatbot Santé</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='reminders.css') }}">
</head>
<body>
  <nav class="navbar">
      <div class="nav-left">
        <img src="{{ url_for('static', filename='image.png') }}" alt="Logo" class="logo">
          <h2>Chatbot Santé</h2>
      </div>
      <div class="nav-right">
          <a href="{{ url_for('index') }}">chatbot</a>
          <a href="{{ url_for('logout') }}">Déconnexion</a>
      </div>
  </nav>

  <div class="container">
     <!-- Logo centré au-dessus du titre -->
      <img src="{{ url_for('static', filename='rappel.png') }}" alt="Logo Chatbot" class="login-logo">
     <h2> Mes rappels</h2>

    <!-- Formulaire d'ajout -->
    <form method="POST" class="add-form">
      <input type="hidden" name="add" value="1">
      <input type="text" name="type" placeholder="Type (vaccin, rdv...)" required>
      <input type="text" name="message" placeholder="Message du rappel" required>
      <input type="date" name="date" required>
      <input type="time" name="time" required>
      <button type="submit"> Ajouter un rappel</button>
    </form>

    <p>{{ message }}</p>

    <h3> Vos rappels enregistrés :</h3>
    <ul>
      {% if reminders %}
        {% for r in reminders %}
          <li>
            <b>{{ r['type']|capitalize }}</b> — {{ r['message'] }}  
            <br> Le {{ r['date'] }} à {{ r['time'] }}

            <!-- Formulaire de modification -->
            <details class="edit-box">
              <summary> Modifier</summary>
              <form method="POST">
                <input type="hidden" name="edit_id" value="{{ r['_id'] }}">
                <input type="text" name="type" value="{{ r['type'] }}">
                <input type="text" name="message" value="{{ r['message'] }}">
                <input type="date" name="date" value="{{ r['date'] }}">
                <input type="time" name="time" value="{{ r['time'] }}">
                <button type="submit" class="edit-btn"> Enregistrer</button>
              </form>
            </details>

            <!-- Formulaire de suppression -->
            <form method="POST" style="display:inline;">
              <input type="hidden" name="delete_id" value="{{ r['_id'] }}">
              <button type="submit" class="delete-btn"> Supprimer</button>
            </form>
          </li>
        {% endfor %}
      {% else %}
        <li>Aucun rappel enregistré.</li>
      {% endif %}
    </ul>
  </div>
</body>
</html>
